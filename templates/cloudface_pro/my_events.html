<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Events - {{ config.COMPANY_NAME }}</title>
</head>
<body style="font-family: -apple-system, sans-serif; margin: 0; padding: 0; background: #F8F9FA;">
    {% include 'cloudface_pro/components/header.html' %}
    
    <div style="max-width: 1200px; margin: 40px auto; padding: 0 20px;">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; flex-wrap: wrap; gap: 20px;">
            <div>
                <h1 style="color: #1F2937; margin: 0 0 5px 0;">My Events</h1>
                <p style="color: #6B7280; margin: 0;">Manage all your events in one place</p>
            </div>
            <a href="/events/create" 
               style="background: {{ config.THEME_COLORS.primary }}; color: white; padding: 12px 24px; border-radius: 8px; text-decoration: none; font-weight: 600;">
                + Create New Event
            </a>
        </div>
        
        <!-- Filter/Search -->
        <div style="background: white; padding: 20px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); margin-bottom: 20px;">
            <input type="text" id="searchEvents" placeholder="Search events..." 
                   style="width: 100%; padding: 12px; border: 2px solid #E5E7EB; border-radius: 8px; font-size: 16px; box-sizing: border-box;">
        </div>
        
        <!-- Events Grid -->
        {% if events %}
        <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 20px;">
            {% for event in events %}
            <div class="event-card" style="background: white; border-radius: 12px; overflow: hidden; box-shadow: 0 2px 8px rgba(0,0,0,0.08); border: 2px solid #E5E7EB;">
                <!-- Event Header -->
                <div style="background: {{ config.THEME_COLORS.primary }}; padding: 20px; color: white;">
                    <h3 style="margin: 0 0 5px 0; font-size: 18px;">{{ event.event_name }}</h3>
                    <p style="margin: 0; opacity: 0.9; font-size: 14px;">{{ event.event_date }}</p>
                </div>
                
                <!-- Event Stats -->
                <div style="padding: 20px;">
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-bottom: 20px;">
                        <div>
                            <div style="color: #6B7280; font-size: 12px; margin-bottom: 3px;">Photos</div>
                            <div style="color: #1F2937; font-weight: 600; font-size: 18px;">{{ event.stats.total_photos }}</div>
                        </div>
                        <div>
                            <div style="color: #6B7280; font-size: 12px; margin-bottom: 3px;">Faces</div>
                            <div style="color: #1F2937; font-weight: 600; font-size: 18px;">{{ event.stats.total_faces }}</div>
                        </div>
                        <div>
                            <div style="color: #6B7280; font-size: 12px; margin-bottom: 3px;">Searches</div>
                            <div style="color: #1F2937; font-weight: 600; font-size: 18px;">{{ event.stats.total_searches }}</div>
                        </div>
                        <div>
                            <div style="color: #6B7280; font-size: 12px; margin-bottom: 3px;">Downloads</div>
                            <div style="color: #1F2937; font-weight: 600; font-size: 18px;">{{ event.stats.total_downloads }}</div>
                        </div>
                    </div>
                    
                    <!-- Status Badge -->
                    <div style="margin-bottom: 15px;">
                        {% if event.status == 'ready' %}
                        <span style="background: {{ config.THEME_COLORS.success }}; color: white; padding: 4px 12px; border-radius: 12px; font-size: 12px; font-weight: 600;">Ready</span>
                        {% elif event.status == 'processing' %}
                        <span style="background: {{ config.THEME_COLORS.secondary }}; color: white; padding: 4px 12px; border-radius: 12px; font-size: 12px; font-weight: 600;">Processing</span>
                        {% else %}
                        <span style="background: #6B7280; color: white; padding: 4px 12px; border-radius: 12px; font-size: 12px; font-weight: 600;">{{ event.status|title }}</span>
                        {% endif %}
                        
                        {% if event.is_public %}
                        <span style="background: #E5E7EB; color: #1F2937; padding: 4px 12px; border-radius: 12px; font-size: 12px; font-weight: 600; margin-left: 8px;">Public</span>
                        {% endif %}
                        
                        {% if event.enable_pin %}
                        <span style="background: #E5E7EB; color: #1F2937; padding: 4px 12px; border-radius: 12px; font-size: 12px; font-weight: 600; margin-left: 8px;">PIN Protected</span>
                        {% endif %}
                    </div>
                    
                    <!-- Actions -->
                    <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                        <a href="/events/{{ event.event_id }}" 
                           style="flex: 1; background: {{ config.THEME_COLORS.primary }}; color: white; padding: 10px; border-radius: 8px; text-decoration: none; font-weight: 600; text-align: center; font-size: 14px;">
                            View
                        </a>
                        <a href="/e/{{ event.event_id }}" target="_blank"
                           style="flex: 1; background: white; color: {{ config.THEME_COLORS.primary }}; padding: 10px; border-radius: 8px; text-decoration: none; font-weight: 600; text-align: center; font-size: 14px; border: 2px solid {{ config.THEME_COLORS.primary }};">
                            Share
                        </a>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        {% else %}
        <div style="background: white; padding: 60px 40px; border-radius: 12px; text-align: center; box-shadow: 0 2px 8px rgba(0,0,0,0.08);">
            <div style="font-size: 64px; color: #E5E7EB; margin-bottom: 20px;">+</div>
            <h3 style="color: #1F2937; margin-bottom: 10px;">No Events Yet</h3>
            <p style="color: #6B7280; margin-bottom: 30px;">Create your first event to get started</p>
            <a href="/events/create" 
               style="display: inline-block; background: {{ config.THEME_COLORS.primary }}; color: white; padding: 14px 28px; border-radius: 8px; text-decoration: none; font-weight: 600;">
                Create Your First Event
            </a>
        </div>
        {% endif %}
    </div>
    
    {% include 'cloudface_pro/components/footer.html' %}
    
    <script>
    // Search events
    document.getElementById('searchEvents')?.addEventListener('input', function(e) {
        const searchTerm = e.target.value.toLowerCase();
        const cards = document.querySelectorAll('.event-card');
        
        cards.forEach(card => {
            const text = card.textContent.toLowerCase();
            card.parentElement.style.display = text.includes(searchTerm) ? 'block' : 'none';
        });
    });
    </script>
</body>
</html>

